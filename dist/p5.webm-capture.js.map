{
  "version": 3,
  "sources": ["../node_modules/ccapture.js/src/CCapture.js", "../src/capturer.ts", "../src/index.ts"],
  "sourcesContent": [";(function() {\r\n\r\n\"use strict\";\r\n\r\n// var isNodeEnviroment = typeof module !== 'undefined' && typeof module.exports !== 'undefined';\r\nvar isNodeEnviroment = false\r\n\r\nvar Tar = window.Tar;\r\nvar download = window.download;\r\nvar GIF = window.GIF;\r\nvar WebMWriter = window.WebMWriter;\r\n\r\nvar objectTypes = {\r\n'function': true,\r\n'object': true\r\n};\r\n\r\nfunction checkGlobal(value) {\r\n    return (value && value.Object === Object) ? value : null;\r\n  }\r\n\r\n/** Built-in method references without a dependency on `root`. */\r\nvar freeParseFloat = parseFloat,\r\n  freeParseInt = parseInt;\r\n\r\n/** Detect free variable `exports`. */\r\nvar freeExports = (objectTypes[typeof exports] && exports && !exports.nodeType)\r\n? exports\r\n: undefined;\r\n\r\n/** Detect free variable `module`. */\r\nvar freeModule = (objectTypes[typeof module] && module && !module.nodeType)\r\n? module\r\n: undefined;\r\n\r\n/** Detect the popular CommonJS extension `module.exports`. */\r\nvar moduleExports = (freeModule && freeModule.exports === freeExports)\r\n? freeExports\r\n: undefined;\r\n\r\n/** Detect free variable `global` from Node.js. */\r\nvar freeGlobal = checkGlobal(freeExports && freeModule && typeof global == 'object' && global);\r\n\r\n/** Detect free variable `self`. */\r\nvar freeSelf = checkGlobal(objectTypes[typeof self] && self);\r\n\r\n/** Detect free variable `window`. */\r\nvar freeWindow = checkGlobal(objectTypes[typeof window] && window);\r\n\r\n/** Detect `this` as the global object. */\r\nvar thisGlobal = checkGlobal(objectTypes[typeof this] && this);\r\n\r\n/**\r\n* Used as a reference to the global object.\r\n*\r\n* The `this` value is used if it's the global object to avoid Greasemonkey's\r\n* restricted `window` object, otherwise the `window` object is used.\r\n*/\r\nvar root = freeGlobal ||\r\n((freeWindow !== (thisGlobal && thisGlobal.window)) && freeWindow) ||\r\n  freeSelf || thisGlobal || Function('return this')();\r\n\r\nif( !('gc' in window ) ) {\r\n\twindow.gc = function(){}\r\n}\r\n\r\nif (!HTMLCanvasElement.prototype.toBlob) {\r\n Object.defineProperty(HTMLCanvasElement.prototype, 'toBlob', {\r\n  value: function (callback, type, quality) {\r\n\r\n    var binStr = atob( this.toDataURL(type, quality).split(',')[1] ),\r\n        len = binStr.length,\r\n        arr = new Uint8Array(len);\r\n\r\n    for (var i=0; i<len; i++ ) {\r\n     arr[i] = binStr.charCodeAt(i);\r\n    }\r\n\r\n    callback( new Blob( [arr], {type: type || 'image/png'} ) );\r\n  }\r\n });\r\n}\r\n\r\n// @license http://opensource.org/licenses/MIT\r\n// copyright Paul Irish 2015\r\n\r\n\r\n// Date.now() is supported everywhere except IE8. For IE8 we use the Date.now polyfill\r\n//   github.com/Financial-Times/polyfill-service/blob/master/polyfills/Date.now/polyfill.js\r\n// as Safari 6 doesn't have support for NavigationTiming, we use a Date.now() timestamp for relative values\r\n\r\n// if you want values similar to what you'd get with real perf.now, place this towards the head of the page\r\n// but in reality, you're just getting the delta between now() calls, so it's not terribly important where it's placed\r\n\r\n\r\n(function(){\r\n\r\n  if (\"performance\" in window == false) {\r\n      window.performance = {};\r\n  }\r\n\r\n  Date.now = (Date.now || function () {  // thanks IE8\r\n\t  return new Date().getTime();\r\n  });\r\n\r\n  if (\"now\" in window.performance == false){\r\n\r\n    var nowOffset = Date.now();\r\n\r\n    if (performance.timing && performance.timing.navigationStart){\r\n      nowOffset = performance.timing.navigationStart\r\n    }\r\n\r\n    window.performance.now = function now(){\r\n      return Date.now() - nowOffset;\r\n    }\r\n  }\r\n\r\n})();\r\n\r\n\r\nfunction pad( n ) {\r\n\treturn String(\"0000000\" + n).slice(-7);\r\n}\r\n// https://developer.mozilla.org/en-US/Add-ons/Code_snippets/Timers\r\n\r\nvar g_startTime = window.Date.now();\r\n\r\nfunction guid() {\r\n\tfunction s4() {\r\n\t\treturn Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\r\n\t}\r\n\treturn s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\r\n}\r\n\r\nfunction CCFrameEncoder( settings ) {\r\n\r\n\tvar _handlers = {};\r\n\r\n\tthis.settings = settings;\r\n\r\n\tthis.on = function(event, handler) {\r\n\r\n\t\t_handlers[event] = handler;\r\n\r\n\t};\r\n\r\n\tthis.emit = function(event) {\r\n\r\n\t\tvar handler = _handlers[event];\r\n\t\tif (handler) {\r\n\r\n\t\t\thandler.apply(null, Array.prototype.slice.call(arguments, 1));\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.filename = settings.name || guid();\r\n\tthis.extension = '';\r\n\tthis.mimeType = '';\r\n\r\n}\r\n\r\nCCFrameEncoder.prototype.start = function(){};\r\nCCFrameEncoder.prototype.stop = function(){};\r\nCCFrameEncoder.prototype.add = function(){};\r\nCCFrameEncoder.prototype.save = function(){};\r\nCCFrameEncoder.prototype.dispose = function(){};\r\nCCFrameEncoder.prototype.safeToProceed = function(){ return true; };\r\nCCFrameEncoder.prototype.step = function() { console.log( 'Step not set!' ) }\r\n\r\nfunction CCTarEncoder( settings ) {\r\n\r\n  CCFrameEncoder.call( this, settings );\r\n\r\n  this.extension = '.tar'\r\n  this.mimeType = 'application/x-tar'\r\n  this.fileExtension = '';\r\n  this.baseFilename = this.filename;\r\n\r\n  this.tape = null\r\n  this.count = 0;\r\n  this.part = 1;\r\n  this.frames = 0;\r\n\r\n}\r\n\r\nCCTarEncoder.prototype = Object.create( CCFrameEncoder.prototype );\r\n\r\nCCTarEncoder.prototype.start = function(){\r\n\r\n  this.dispose();\r\n\r\n};\r\n\r\nCCTarEncoder.prototype.add = function( blob ) {\r\n\r\n  var fileReader = new FileReader();\r\n  fileReader.onload = function() {\r\n    this.tape.append( pad( this.count ) + this.fileExtension, new Uint8Array( fileReader.result ) );\r\n\r\n    if( this.settings.autoSaveTime > 0 && ( this.frames / this.settings.framerate ) >= this.settings.autoSaveTime ) {\r\n      this.save( function( blob ) {\r\n        this.filename = this.baseFilename + '-part-' + pad( this.part );\r\n        download( blob, this.filename + this.extension, this.mimeType );\r\n        var count = this.count;\r\n        this.dispose();\r\n        this.count = count+1;\r\n        this.part++;\r\n        this.filename = this.baseFilename + '-part-' + pad( this.part );\r\n        this.frames = 0;\r\n        this.step();\r\n      }.bind( this ) )\r\n    } else {\r\n      this.count++;\r\n      this.frames++;\r\n      this.step();\r\n    }\r\n\r\n  }.bind( this );\r\n  fileReader.readAsArrayBuffer(blob);\r\n\r\n}\r\n\r\nCCTarEncoder.prototype.save = function( callback ) {\r\n\r\n  callback( this.tape.save() );\r\n\r\n}\r\n\r\nCCTarEncoder.prototype.dispose = function() {\r\n\r\n  this.tape = new Tar();\r\n  this.count = 0;\r\n\r\n}\r\n\r\nfunction CCPNGEncoder( settings ) {\r\n\r\n\tCCTarEncoder.call( this, settings );\r\n\r\n\tthis.type = 'image/png';\r\n\tthis.fileExtension = '.png';\r\n\r\n}\r\n\r\nCCPNGEncoder.prototype = Object.create( CCTarEncoder.prototype );\r\n\r\nCCPNGEncoder.prototype.add = function( canvas ) {\r\n\r\n\tcanvas.toBlob( function( blob ) {\r\n\t\tCCTarEncoder.prototype.add.call( this, blob );\r\n\t}.bind( this ), this.type )\r\n\r\n}\r\n\r\nfunction CCJPEGEncoder( settings ) {\r\n\r\n\tCCTarEncoder.call( this, settings );\r\n\r\n\tthis.type = 'image/jpeg';\r\n\tthis.fileExtension = '.jpg';\r\n\tthis.quality = ( settings.quality / 100 ) || .8;\r\n\r\n}\r\n\r\nCCJPEGEncoder.prototype = Object.create( CCTarEncoder.prototype );\r\n\r\nCCJPEGEncoder.prototype.add = function( canvas ) {\r\n\r\n\tcanvas.toBlob( function( blob ) {\r\n\t\tCCTarEncoder.prototype.add.call( this, blob );\r\n\t}.bind( this ), this.type, this.quality )\r\n\r\n}\r\n\r\n/*\r\n\r\n\tWebM Encoder\r\n\r\n*/\r\n\r\nfunction CCWebMEncoder( settings ) {\r\n\r\n\tvar canvas = document.createElement( 'canvas' );\r\n\tif( canvas.toDataURL( 'image/webp' ).substr(5,10) !== 'image/webp' ){\r\n\t\tconsole.log( \"WebP not supported - try another export format\" )\r\n\t}\r\n\r\n\tCCFrameEncoder.call( this, settings );\r\n\r\n\tthis.quality = ( settings.quality / 100 ) || .8;\r\n\r\n\tthis.extension = '.webm'\r\n\tthis.mimeType = 'video/webm'\r\n\tthis.baseFilename = this.filename;\r\n  this.framerate = settings.framerate;\r\n\r\n\tthis.frames = 0;\r\n\tthis.part = 1;\r\n\r\n  this.videoWriter = new WebMWriter({\r\n    quality: this.quality,\r\n    fileWriter: null,\r\n    fd: null,\r\n    frameRate: this.framerate\r\n  });\r\n\r\n}\r\n\r\nCCWebMEncoder.prototype = Object.create( CCFrameEncoder.prototype );\r\n\r\nCCWebMEncoder.prototype.start = function( canvas ) {\r\n\r\n\tthis.dispose();\r\n\r\n}\r\n\r\nCCWebMEncoder.prototype.add = function( canvas ) {\r\n\r\n  this.videoWriter.addFrame(canvas);\r\n\r\n\tif( this.settings.autoSaveTime > 0 && ( this.frames / this.settings.framerate ) >= this.settings.autoSaveTime ) {\r\n\t\tthis.save( function( blob ) {\r\n\t\t\tthis.filename = this.baseFilename + '-part-' + pad( this.part );\r\n\t\t\tdownload( blob, this.filename + this.extension, this.mimeType );\r\n\t\t\tthis.dispose();\r\n\t\t\tthis.part++;\r\n\t\t\tthis.filename = this.baseFilename + '-part-' + pad( this.part );\r\n\t\t\tthis.step();\r\n\t\t}.bind( this ) )\r\n\t} else {\r\n    this.frames++;\r\n\t\tthis.step();\r\n\t}\r\n\r\n}\r\n\r\nCCWebMEncoder.prototype.save = function( callback ) {\r\n\r\n  this.videoWriter.complete().then(callback);\r\n\r\n}\r\n\r\nCCWebMEncoder.prototype.dispose = function( canvas ) {\r\n\r\n\tthis.frames = 0;\r\n  this.videoWriter = new WebMWriter({\r\n    quality: this.quality,\r\n    fileWriter: null,\r\n    fd: null,\r\n    frameRate: this.framerate\r\n  });\r\n\r\n}\r\n\r\nfunction CCFFMpegServerEncoder( settings ) {\r\n\r\n\tCCFrameEncoder.call( this, settings );\r\n\r\n\tsettings.quality = ( settings.quality / 100 ) || .8;\r\n\r\n\tthis.encoder = new FFMpegServer.Video( settings );\r\n    this.encoder.on( 'process', function() {\r\n        this.emit( 'process' )\r\n    }.bind( this ) );\r\n    this.encoder.on('finished', function( url, size ) {\r\n        var cb = this.callback;\r\n        if ( cb ) {\r\n            this.callback = undefined;\r\n            cb( url, size );\r\n        }\r\n    }.bind( this ) );\r\n    this.encoder.on( 'progress', function( progress ) {\r\n        if ( this.settings.onProgress ) {\r\n            this.settings.onProgress( progress )\r\n        }\r\n    }.bind( this ) );\r\n    this.encoder.on( 'error', function( data ) {\r\n        alert(JSON.stringify(data, null, 2));\r\n    }.bind( this ) );\r\n\r\n}\r\n\r\nCCFFMpegServerEncoder.prototype = Object.create( CCFrameEncoder.prototype );\r\n\r\nCCFFMpegServerEncoder.prototype.start = function() {\r\n\r\n\tthis.encoder.start( this.settings );\r\n\r\n};\r\n\r\nCCFFMpegServerEncoder.prototype.add = function( canvas ) {\r\n\r\n\tthis.encoder.add( canvas );\r\n\r\n}\r\n\r\nCCFFMpegServerEncoder.prototype.save = function( callback ) {\r\n\r\n    this.callback = callback;\r\n    this.encoder.end();\r\n\r\n}\r\n\r\nCCFFMpegServerEncoder.prototype.safeToProceed = function() {\r\n    return this.encoder.safeToProceed();\r\n};\r\n\r\n/*\r\n\tHTMLCanvasElement.captureStream()\r\n*/\r\n\r\nfunction CCStreamEncoder( settings ) {\r\n\r\n\tCCFrameEncoder.call( this, settings );\r\n\r\n\tthis.framerate = this.settings.framerate;\r\n\tthis.type = 'video/webm';\r\n\tthis.extension = '.webm';\r\n\tthis.stream = null;\r\n\tthis.mediaRecorder = null;\r\n\tthis.chunks = [];\r\n\r\n}\r\n\r\nCCStreamEncoder.prototype = Object.create( CCFrameEncoder.prototype );\r\n\r\nCCStreamEncoder.prototype.add = function( canvas ) {\r\n\r\n\tif( !this.stream ) {\r\n\t\tthis.stream = canvas.captureStream( this.framerate );\r\n\t\tthis.mediaRecorder = new MediaRecorder( this.stream );\r\n\t\tthis.mediaRecorder.start();\r\n\r\n\t\tthis.mediaRecorder.ondataavailable = function(e) {\r\n\t\t\tthis.chunks.push(e.data);\r\n\t\t}.bind( this );\r\n\r\n\t}\r\n\tthis.step();\r\n\r\n}\r\n\r\nCCStreamEncoder.prototype.save = function( callback ) {\r\n\r\n\tthis.mediaRecorder.onstop = function( e ) {\r\n\t\tvar blob = new Blob( this.chunks, { 'type' : 'video/webm' });\r\n\t\tthis.chunks = [];\r\n\t\tcallback( blob );\r\n\r\n\t}.bind( this );\r\n\r\n\tthis.mediaRecorder.stop();\r\n\r\n}\r\n\r\n/*function CCGIFEncoder( settings ) {\r\n\r\n\tCCFrameEncoder.call( this );\r\n\r\n\tsettings.quality = settings.quality || 6;\r\n\tthis.settings = settings;\r\n\r\n\tthis.encoder = new GIFEncoder();\r\n\tthis.encoder.setRepeat( 1 );\r\n  \tthis.encoder.setDelay( settings.step );\r\n  \tthis.encoder.setQuality( 6 );\r\n  \tthis.encoder.setTransparent( null );\r\n  \tthis.encoder.setSize( 150, 150 );\r\n\r\n  \tthis.canvas = document.createElement( 'canvas' );\r\n  \tthis.ctx = this.canvas.getContext( '2d' );\r\n\r\n}\r\n\r\nCCGIFEncoder.prototype = Object.create( CCFrameEncoder );\r\n\r\nCCGIFEncoder.prototype.start = function() {\r\n\r\n\tthis.encoder.start();\r\n\r\n}\r\n\r\nCCGIFEncoder.prototype.add = function( canvas ) {\r\n\r\n\tthis.canvas.width = canvas.width;\r\n\tthis.canvas.height = canvas.height;\r\n\tthis.ctx.drawImage( canvas, 0, 0 );\r\n\tthis.encoder.addFrame( this.ctx );\r\n\r\n\tthis.encoder.setSize( canvas.width, canvas.height );\r\n\tvar readBuffer = new Uint8Array(canvas.width * canvas.height * 4);\r\n\tvar context = canvas.getContext( 'webgl' );\r\n\tcontext.readPixels(0, 0, canvas.width, canvas.height, context.RGBA, context.UNSIGNED_BYTE, readBuffer);\r\n\tthis.encoder.addFrame( readBuffer, true );\r\n\r\n}\r\n\r\nCCGIFEncoder.prototype.stop = function() {\r\n\r\n\tthis.encoder.finish();\r\n\r\n}\r\n\r\nCCGIFEncoder.prototype.save = function( callback ) {\r\n\r\n\tvar binary_gif = this.encoder.stream().getData();\r\n\r\n\tvar data_url = 'data:image/gif;base64,'+encode64(binary_gif);\r\n\twindow.location = data_url;\r\n\treturn;\r\n\r\n\tvar blob = new Blob( [ binary_gif ], { type: \"octet/stream\" } );\r\n\tvar url = window.URL.createObjectURL( blob );\r\n\tcallback( url );\r\n\r\n}*/\r\n\r\nfunction CCGIFEncoder( settings ) {\r\n\r\n\tCCFrameEncoder.call( this, settings );\r\n\r\n\tsettings.quality = 31 - ( ( settings.quality * 30 / 100 ) || 10 );\r\n\tsettings.workers = settings.workers || 4;\r\n\r\n\tthis.extension = '.gif'\r\n\tthis.mimeType = 'image/gif'\r\n\r\n  \tthis.canvas = document.createElement( 'canvas' );\r\n  \tthis.ctx = this.canvas.getContext( '2d' );\r\n  \tthis.sizeSet = false;\r\n\r\n  \tthis.encoder = new GIF({\r\n\t\tworkers: settings.workers,\r\n\t\tquality: settings.quality,\r\n\t\tworkerScript: settings.workersPath + 'gif.worker.js'\r\n\t} );\r\n\r\n    this.encoder.on( 'progress', function( progress ) {\r\n        if ( this.settings.onProgress ) {\r\n            this.settings.onProgress( progress )\r\n        }\r\n    }.bind( this ) );\r\n\r\n    this.encoder.on('finished', function( blob ) {\r\n        var cb = this.callback;\r\n        if ( cb ) {\r\n            this.callback = undefined;\r\n            cb( blob );\r\n        }\r\n    }.bind( this ) );\r\n\r\n}\r\n\r\nCCGIFEncoder.prototype = Object.create( CCFrameEncoder.prototype );\r\n\r\nCCGIFEncoder.prototype.add = function( canvas ) {\r\n\r\n\tif( !this.sizeSet ) {\r\n\t\tthis.encoder.setOption( 'width',canvas.width );\r\n\t\tthis.encoder.setOption( 'height',canvas.height );\r\n\t\tthis.sizeSet = true;\r\n\t}\r\n\r\n\tthis.canvas.width = canvas.width;\r\n\tthis.canvas.height = canvas.height;\r\n\tthis.ctx.drawImage( canvas, 0, 0 );\r\n\r\n\tthis.encoder.addFrame( this.ctx, { copy: true, delay: this.settings.step } );\r\n\tthis.step();\r\n\r\n\t/*this.encoder.setSize( canvas.width, canvas.height );\r\n\tvar readBuffer = new Uint8Array(canvas.width * canvas.height * 4);\r\n\tvar context = canvas.getContext( 'webgl' );\r\n\tcontext.readPixels(0, 0, canvas.width, canvas.height, context.RGBA, context.UNSIGNED_BYTE, readBuffer);\r\n\tthis.encoder.addFrame( readBuffer, true );*/\r\n\r\n}\r\n\r\nCCGIFEncoder.prototype.save = function( callback ) {\r\n\r\n    this.callback = callback;\r\n\r\n\tthis.encoder.render();\r\n\r\n}\r\n\r\nfunction CCapture( settings ) {\r\n\r\n\tvar _settings = settings || {},\r\n\t\t_date = new Date(),\r\n\t\t_verbose,\r\n\t\t_display,\r\n\t\t_time,\r\n\t\t_startTime,\r\n\t\t_performanceTime,\r\n\t\t_performanceStartTime,\r\n\t\t_step,\r\n        _encoder,\r\n\t\t_timeouts = [],\r\n\t\t_intervals = [],\r\n\t\t_frameCount = 0,\r\n\t\t_intermediateFrameCount = 0,\r\n\t\t_lastFrame = null,\r\n\t\t_requestAnimationFrameCallbacks = [],\r\n\t\t_capturing = false,\r\n        _handlers = {};\r\n\r\n\t_settings.framerate = _settings.framerate || 60;\r\n\t_settings.motionBlurFrames = 2 * ( _settings.motionBlurFrames || 1 );\r\n\t_verbose = _settings.verbose || false;\r\n\t_display = _settings.display || false;\r\n\t_settings.step = 1000.0 / _settings.framerate ;\r\n\t_settings.timeLimit = _settings.timeLimit || 0;\r\n\t_settings.frameLimit = _settings.frameLimit || 0;\r\n\t_settings.startTime = _settings.startTime || 0;\r\n\r\n\tvar _timeDisplay = document.createElement( 'div' );\r\n\t_timeDisplay.style.position = 'absolute';\r\n\t_timeDisplay.style.left = _timeDisplay.style.top = 0\r\n\t_timeDisplay.style.backgroundColor = 'black';\r\n\t_timeDisplay.style.fontFamily = 'monospace'\r\n\t_timeDisplay.style.fontSize = '11px'\r\n\t_timeDisplay.style.padding = '5px'\r\n\t_timeDisplay.style.color = 'red';\r\n\t_timeDisplay.style.zIndex = 100000\r\n\tif( _settings.display ) document.body.appendChild( _timeDisplay );\r\n\r\n\tvar canvasMotionBlur = document.createElement( 'canvas' );\r\n\tvar ctxMotionBlur = canvasMotionBlur.getContext( '2d' );\r\n\tvar bufferMotionBlur;\r\n\tvar imageData;\r\n\r\n\t_log( 'Step is set to ' + _settings.step + 'ms' );\r\n\r\n    var _encoders = {\r\n\t\tgif: CCGIFEncoder,\r\n\t\twebm: CCWebMEncoder,\r\n\t\tffmpegserver: CCFFMpegServerEncoder,\r\n\t\tpng: CCPNGEncoder,\r\n\t\tjpg: CCJPEGEncoder,\r\n\t\t'webm-mediarecorder': CCStreamEncoder\r\n    };\r\n\r\n    var ctor = _encoders[ _settings.format ];\r\n    if ( !ctor ) {\r\n\t\tthrow \"Error: Incorrect or missing format: Valid formats are \" + Object.keys(_encoders).join(\", \");\r\n    }\r\n    _encoder = new ctor( _settings );\r\n    _encoder.step = _step\r\n\r\n\t_encoder.on('process', _process);\r\n    _encoder.on('progress', _progress);\r\n\r\n    if (\"performance\" in window == false) {\r\n    \twindow.performance = {};\r\n    }\r\n\r\n\tDate.now = (Date.now || function () {  // thanks IE8\r\n\t\treturn new Date().getTime();\r\n\t});\r\n\r\n\tif (\"now\" in window.performance == false){\r\n\r\n\t\tvar nowOffset = Date.now();\r\n\r\n\t\tif (performance.timing && performance.timing.navigationStart){\r\n\t\t\tnowOffset = performance.timing.navigationStart\r\n\t\t}\r\n\r\n\t\twindow.performance.now = function now(){\r\n\t\t\treturn Date.now() - nowOffset;\r\n\t\t}\r\n\t}\r\n\r\n\tvar _oldSetTimeout = window.setTimeout,\r\n\t\t_oldSetInterval = window.setInterval,\r\n\t    \t_oldClearInterval = window.clearInterval,\r\n\t\t_oldClearTimeout = window.clearTimeout,\r\n\t\t_oldRequestAnimationFrame = window.requestAnimationFrame,\r\n\t\t_oldNow = window.Date.now,\r\n\t\t_oldPerformanceNow = window.performance.now,\r\n\t\t_oldGetTime = window.Date.prototype.getTime;\r\n\t// Date.prototype._oldGetTime = Date.prototype.getTime;\r\n\r\n\tvar media = [];\r\n\r\n\tfunction _init() {\r\n\r\n\t\t_log( 'Capturer start' );\r\n\r\n\t\t_startTime = window.Date.now();\r\n\t\t_time = _startTime + _settings.startTime;\r\n\t\t_performanceStartTime = window.performance.now();\r\n\t\t_performanceTime = _performanceStartTime + _settings.startTime;\r\n\r\n\t\twindow.Date.prototype.getTime = function(){\r\n\t\t\treturn _time;\r\n\t\t};\r\n\t\twindow.Date.now = function() {\r\n\t\t\treturn _time;\r\n\t\t};\r\n\r\n\t\twindow.setTimeout = function( callback, time ) {\r\n\t\t\tvar t = {\r\n\t\t\t\tcallback: callback,\r\n\t\t\t\ttime: time,\r\n\t\t\t\ttriggerTime: _time + time\r\n\t\t\t};\r\n\t\t\t_timeouts.push( t );\r\n\t\t\t_log( 'Timeout set to ' + t.time );\r\n            return t;\r\n\t\t};\r\n\t\twindow.clearTimeout = function( id ) {\r\n\t\t\tfor( var j = 0; j < _timeouts.length; j++ ) {\r\n\t\t\t\tif( _timeouts[ j ] == id ) {\r\n\t\t\t\t\t_timeouts.splice( j, 1 );\r\n\t\t\t\t\t_log( 'Timeout cleared' );\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\twindow.setInterval = function( callback, time ) {\r\n\t\t\tvar t = {\r\n\t\t\t\tcallback: callback,\r\n\t\t\t\ttime: time,\r\n\t\t\t\ttriggerTime: _time + time\r\n\t\t\t};\r\n\t\t\t_intervals.push( t );\r\n\t\t\t_log( 'Interval set to ' + t.time );\r\n\t\t\treturn t;\r\n\t\t};\r\n\t\twindow.clearInterval = function( id ) {\r\n\t\t\t_log( 'clear Interval' );\r\n\t\t\treturn null;\r\n\t\t};\r\n\t\twindow.requestAnimationFrame = function( callback ) {\r\n\t\t\t_requestAnimationFrameCallbacks.push( callback );\r\n\t\t};\r\n\t\twindow.performance.now = function(){\r\n\t\t\treturn _performanceTime;\r\n\t\t};\r\n\r\n\t\tfunction hookCurrentTime() {\u00A0\r\n\t\t\tif( !this._hooked ) {\r\n\t\t\t\tthis._hooked = true;\r\n\t\t\t\tthis._hookedTime = this.currentTime || 0;\r\n\t\t\t\tthis.pause();\r\n\t\t\t\tmedia.push( this );\r\n\t\t\t}\r\n\t\t\treturn this._hookedTime + _settings.startTime;\r\n\t\t};\r\n\r\n\t\ttry {\r\n\t\t\tObject.defineProperty( HTMLVideoElement.prototype, 'currentTime', { get: hookCurrentTime } )\r\n\t\t\tObject.defineProperty( HTMLAudioElement.prototype, 'currentTime', { get: hookCurrentTime } )\r\n\t\t} catch (err) {\r\n\t\t\t_log(err);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction _start() {\r\n\t\t_init();\r\n\t\t_encoder.start();\r\n\t\t_capturing = true;\r\n\t}\r\n\r\n\tfunction _stop() {\r\n\t\t_capturing = false;\r\n\t\t_encoder.stop();\r\n\t\t_destroy();\r\n\t}\r\n\r\n\tfunction _call( fn, p ) {\r\n\t\t_oldSetTimeout( fn, 0, p );\r\n\t}\r\n\r\n\tfunction _step() {\r\n\t\t//_oldRequestAnimationFrame( _process );\r\n\t\t_call( _process );\r\n\t}\r\n\r\n\tfunction _destroy() {\r\n\t\t_log( 'Capturer stop' );\r\n\t\twindow.setTimeout = _oldSetTimeout;\r\n\t\twindow.setInterval = _oldSetInterval;\r\n\t\twindow.clearInterval = _oldClearInterval;\r\n\t\twindow.clearTimeout = _oldClearTimeout;\r\n\t\twindow.requestAnimationFrame = _oldRequestAnimationFrame;\r\n\t\twindow.Date.prototype.getTime = _oldGetTime;\r\n\t\twindow.Date.now = _oldNow;\r\n\t\twindow.performance.now = _oldPerformanceNow;\r\n\t}\r\n\r\n\tfunction _updateTime() {\r\n\t\tvar seconds = _frameCount / _settings.framerate;\r\n\t\tif( ( _settings.frameLimit && _frameCount >= _settings.frameLimit ) || ( _settings.timeLimit && seconds >= _settings.timeLimit ) ) {\r\n\t\t\t_stop();\r\n\t\t\t_save();\r\n\t\t}\r\n\t\tvar d = new Date( null );\r\n\t\td.setSeconds( seconds );\r\n\t\tif( _settings.motionBlurFrames > 2 ) {\r\n\t\t\t_timeDisplay.textContent = 'CCapture ' + _settings.format + ' | ' + _frameCount + ' frames (' + _intermediateFrameCount + ' inter) | ' +  d.toISOString().substr( 11, 8 );\r\n\t\t} else {\r\n\t\t\t_timeDisplay.textContent = 'CCapture ' + _settings.format + ' | ' + _frameCount + ' frames | ' +  d.toISOString().substr( 11, 8 );\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _checkFrame( canvas ) {\r\n\r\n\t\tif( canvasMotionBlur.width !== canvas.width || canvasMotionBlur.height !== canvas.height ) {\r\n\t\t\tcanvasMotionBlur.width = canvas.width;\r\n\t\t\tcanvasMotionBlur.height = canvas.height;\r\n\t\t\tbufferMotionBlur = new Uint16Array( canvasMotionBlur.height * canvasMotionBlur.width * 4 );\r\n\t\t\tctxMotionBlur.fillStyle = '#0'\r\n\t\t\tctxMotionBlur.fillRect( 0, 0, canvasMotionBlur.width, canvasMotionBlur.height );\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction _blendFrame( canvas ) {\r\n\r\n\t\t//_log( 'Intermediate Frame: ' + _intermediateFrameCount );\r\n\r\n\t\tctxMotionBlur.drawImage( canvas, 0, 0 );\r\n\t\timageData = ctxMotionBlur.getImageData( 0, 0, canvasMotionBlur.width, canvasMotionBlur.height );\r\n\t\tfor( var j = 0; j < bufferMotionBlur.length; j+= 4 ) {\r\n\t\t\tbufferMotionBlur[ j ] += imageData.data[ j ];\r\n\t\t\tbufferMotionBlur[ j + 1 ] += imageData.data[ j + 1 ];\r\n\t\t\tbufferMotionBlur[ j + 2 ] += imageData.data[ j + 2 ];\r\n\t\t}\r\n\t\t_intermediateFrameCount++;\r\n\r\n\t}\r\n\r\n\tfunction _saveFrame(){\r\n\r\n\t\tvar data = imageData.data;\r\n\t\tfor( var j = 0; j < bufferMotionBlur.length; j+= 4 ) {\r\n\t\t\tdata[ j ] = bufferMotionBlur[ j ] * 2 / _settings.motionBlurFrames;\r\n\t\t\tdata[ j + 1 ] = bufferMotionBlur[ j + 1 ] * 2 / _settings.motionBlurFrames;\r\n\t\t\tdata[ j + 2 ] = bufferMotionBlur[ j + 2 ] * 2 / _settings.motionBlurFrames;\r\n\t\t}\r\n\t\tctxMotionBlur.putImageData( imageData, 0, 0 );\r\n\t\t_encoder.add( canvasMotionBlur );\r\n\t\t_frameCount++;\r\n\t\t_intermediateFrameCount = 0;\r\n\t\t_log( 'Full MB Frame! ' + _frameCount + ' ' +  _time );\r\n\t\tfor( var j = 0; j < bufferMotionBlur.length; j+= 4 ) {\r\n\t\t\tbufferMotionBlur[ j ] = 0;\r\n\t\t\tbufferMotionBlur[ j + 1 ] = 0;\r\n\t\t\tbufferMotionBlur[ j + 2 ] = 0;\r\n\t\t}\r\n\t\tgc();\r\n\r\n\t}\r\n\r\n\tfunction _capture( canvas ) {\r\n\r\n\t\tif( _capturing ) {\r\n\r\n\t\t\tif( _settings.motionBlurFrames > 2 ) {\r\n\r\n\t\t\t\t_checkFrame( canvas );\r\n\t\t\t\t_blendFrame( canvas );\r\n\r\n\t\t\t\tif( _intermediateFrameCount >= .5 * _settings.motionBlurFrames ) {\r\n\t\t\t\t\t_saveFrame();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_step();\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\t_encoder.add( canvas );\r\n\t\t\t\t_frameCount++;\r\n\t\t\t\t_log( 'Full Frame! ' + _frameCount );\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction _process() {\r\n\r\n\t\tvar step = 1000 / _settings.framerate;\r\n\t\tvar dt = ( _frameCount + _intermediateFrameCount / _settings.motionBlurFrames ) * step;\r\n\r\n\t\t_time = _startTime + dt;\r\n\t\t_performanceTime = _performanceStartTime + dt;\r\n\r\n\t\tmedia.forEach( function( v ) {\r\n\t\t\tv._hookedTime = dt / 1000;\r\n\t\t} );\r\n\r\n\t\t_updateTime();\r\n\t\t_log( 'Frame: ' + _frameCount + ' ' + _intermediateFrameCount );\r\n\r\n\t\tfor( var j = 0; j < _timeouts.length; j++ ) {\r\n\t\t\tif( _time >= _timeouts[ j ].triggerTime ) {\r\n\t\t\t\t_call( _timeouts[ j ].callback )\r\n\t\t\t\t//console.log( 'timeout!' );\r\n\t\t\t\t_timeouts.splice( j, 1 );\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor( var j = 0; j < _intervals.length; j++ ) {\r\n\t\t\tif( _time >= _intervals[ j ].triggerTime ) {\r\n\t\t\t\t_call( _intervals[ j ].callback );\r\n\t\t\t\t_intervals[ j ].triggerTime += _intervals[ j ].time;\r\n\t\t\t\t//console.log( 'interval!' );\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_requestAnimationFrameCallbacks.forEach( function( cb ) {\r\n     \t\t_call( cb, _time - g_startTime );\r\n        } );\r\n        _requestAnimationFrameCallbacks = [];\r\n\r\n\t}\r\n\r\n\tfunction _save( callback ) {\r\n\r\n\t\tif( !callback ) {\r\n\t\t\tcallback = function( blob ) {\r\n\t\t\t\tdownload( blob, _encoder.filename + _encoder.extension, _encoder.mimeType );\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\t_encoder.save( callback );\r\n\r\n\t}\r\n\r\n\tfunction _log( message ) {\r\n\t\tif( _verbose ) console.log( message );\r\n\t}\r\n\r\n    function _on( event, handler ) {\r\n\r\n        _handlers[event] = handler;\r\n\r\n    }\r\n\r\n    function _emit( event ) {\r\n\r\n        var handler = _handlers[event];\r\n        if ( handler ) {\r\n\r\n            handler.apply( null, Array.prototype.slice.call( arguments, 1 ) );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    function _progress( progress ) {\r\n\r\n        _emit( 'progress', progress );\r\n\r\n    }\r\n\r\n\treturn {\r\n\t\tstart: _start,\r\n\t\tcapture: _capture,\r\n\t\tstop: _stop,\r\n\t\tsave: _save,\r\n        on: _on\r\n\t}\r\n}\r\n\r\n(freeWindow || freeSelf || {}).CCapture = CCapture;\r\n\r\n  // Some AMD build optimizers like r.js check for condition patterns like the following:\r\n  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {\r\n    // Define as an anonymous module so, through path mapping, it can be\r\n    // referenced as the \"underscore\" module.\r\n    define(function() {\r\n    \treturn CCapture;\r\n    });\r\n}\r\n  // Check for `exports` after `define` in case a build optimizer adds an `exports` object.\r\n  else if (freeExports && freeModule) {\r\n    // Export for Node.js.\r\n    if (moduleExports) {\r\n    \t(freeModule.exports = CCapture).CCapture = CCapture;\r\n    }\r\n    // Export for CommonJS support.\r\n    freeExports.CCapture = CCapture;\r\n}\r\nelse {\r\n    // Export to the global object.\r\n    root.CCapture = CCapture;\r\n}\r\n\r\n}());\r\n", "import CCapture from \"ccapture.js\";\n\nexport type CapturerSettings = {\n  frameCount: number;\n  element: HTMLCanvasElement;\n  onComplete?: Function;\n};\n\nexport default class Capturer {\n  running: boolean;\n  active: boolean;\n  capture: CCapture;\n  maxFrames: number;\n  frames: number;\n  el: HTMLCanvasElement;\n  onComplete: Function;\n\n  constructor() {\n    this.active = false;\n    this.running = false;\n  }\n\n  enableCapture({ frameCount, element, onComplete }: CapturerSettings) {\n    this.active = true;\n    this.el = element;\n    this.maxFrames = frameCount;\n    this.frames = 0;\n    this.capture = new CCapture({\n      framerate: 60,\n      format: \"webm\",\n      verbose: false,\n    });\n    this.onComplete = onComplete || function () {};\n  }\n\n  captureFrame() {\n    if (this.active && !this.running) {\n      this.capture.start();\n    }\n\n    if (this.active) {\n      this.capture.capture(this.el);\n      this.frames++;\n\n      if (this.frames > this.maxFrames) {\n        this.capture.stop();\n        this.capture.save();\n        this.onComplete();\n      }\n    }\n  }\n}\n", "import Capturer, { CapturerSettings } from \"./capturer\";\n\ndeclare global {\n  interface Window {\n    enableCapture: (settings: CapturerSettings) => void;\n    captureFrame: () => void;\n  }\n}\n\nif (window) {\n  // running in a browser, attach capturer to global window object\n  const capturer = new Capturer();\n  window.enableCapture = capturer.enableCapture;\n  window.captureFrame = capturer.captureFrame;\n}\n"],
  "mappings": "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",
  "names": []
}
