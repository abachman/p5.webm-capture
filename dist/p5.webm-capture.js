(()=>{var X=function(e,t,i){var a=window,u="application/octet-stream",x=i||u,h=e,f=!t&&!i&&h,p=document.createElement("a"),d=function(m){return String(m)},r=a.Blob||a.MozBlob||a.WebKitBlob||d,B=t||"download",w,E;if(r=r.call?r.bind(a):Blob,String(this)==="true"&&(h=[h,x],x=h[0],h=h[1]),f&&f.length<2048&&(B=f.split("/").pop().split("?")[0],p.href=f,p.href.indexOf(f)!==-1)){var A=new XMLHttpRequest;return A.open("GET",f,!0),A.responseType="blob",A.onload=function(m){X(m.target.response,B,u)},setTimeout(function(){A.send()},0),A}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(h))if(h.length>1024*1024*1.999&&r!==d)h=T(h),x=h.type||u;else return navigator.msSaveBlob?navigator.msSaveBlob(T(h),B):y(h);else if(/([\x80-\xff])/.test(h)){var g=0,C=new Uint8Array(h.length),k=C.length;for(g;g<k;++g)C[g]=h.charCodeAt(g);h=new r([C],{type:x})}w=h instanceof r?h:new r([h],{type:x});function T(m){var U=m.split(/[:;,]/),_=U[1],I=m.indexOf("charset")>0?3:2,H=U[I]=="base64"?atob:decodeURIComponent,W=H(U.pop()),O=W.length,F=0,z=new Uint8Array(O);for(F;F<O;++F)z[F]=W.charCodeAt(F);return new r([z],{type:_})}function y(m,U){if("download"in p)return p.href=m,p.setAttribute("download",B),p.className="download-js-link",p.innerHTML="downloading...",p.style.display="none",p.addEventListener("click",function(I){I.stopPropagation(),this.removeEventListener("click",arguments.callee)}),document.body.appendChild(p),setTimeout(function(){p.click(),document.body.removeChild(p),U===!0&&setTimeout(function(){a.URL.revokeObjectURL(p.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(m)&&(m="data:"+m.replace(/^data:([\w\/\-\+]+)/,u)),window.open(m)||confirm("Displaying New Document. Use Save As... to download, then click back to return to this page.")&&(location.href=m),!0;var _=document.createElement("iframe");document.body.appendChild(_),!U&&/^data:/.test(m)&&(m="data:"+m.replace(/^data:([\w\/\-\+]+)/,u)),_.src=m,setTimeout(function(){document.body.removeChild(_)},333)}return y(a.URL.createObjectURL(w),!0),!0};var D=class{constructor(t){this.data=new Uint8Array(t),this.pos=0}seek(t){this.pos=t}writeBytes(t){for(let i=0;i<t.length;i++)this.data[this.pos++]=t[i]}writeByte(t){this.data[this.pos++]=t}writeU16BE(t){this.data[this.pos++]=t>>8,this.data[this.pos++]=t}writeDoubleBE(t){let i=new Uint8Array(new Float64Array([t]).buffer);for(let a=i.length-1;a>=0;a--)this.writeByte(i[a])}writeFloatBE(t){let i=new Uint8Array(new Float32Array([t]).buffer);for(let a=i.length-1;a>=0;a--)this.writeByte(i[a])}writeString(t){for(let i=0;i<t.length;i++)this.data[this.pos++]=t.charCodeAt(i)}writeEBMLVarIntWidth(t,i){switch(i){case 1:this.writeU8(1<<7|t);break;case 2:this.writeU8(1<<6|t>>8),this.writeU8(t);break;case 3:this.writeU8(1<<5|t>>16),this.writeU8(t>>8),this.writeU8(t);break;case 4:this.writeU8(1<<4|t>>24),this.writeU8(t>>16),this.writeU8(t>>8),this.writeU8(t);break;case 5:this.writeU8(1<<3|t/4294967296&7),this.writeU8(t>>24),this.writeU8(t>>16),this.writeU8(t>>8),this.writeU8(t);break;default:throw new Error("Bad EBML VINT size "+i)}}measureEBMLVarInt(t){if(t<(1<<7)-1)return 1;if(t<(1<<14)-1)return 2;if(t<(1<<21)-1)return 3;if(t<(1<<28)-1)return 4;if(t<34359738367)return 5;throw new Error("EBML VINT size not supported "+t)}writeEBMLVarInt(t){this.writeEBMLVarIntWidth(t,this.measureEBMLVarInt(t))}writeUnsignedIntBE(t,i){switch(i===void 0&&(i=this.measureUnsignedInt(t)),i){case 5:this.writeU8(Math.floor(t/4294967296));case 4:this.writeU8(t>>24);case 3:this.writeU8(t>>16);case 2:this.writeU8(t>>8);case 1:this.writeU8(t);break;default:throw new Error("Bad UINT size "+i)}}measureUnsignedInt(t){return t<1<<8?1:t<1<<16?2:t<1<<24?3:t<4294967296?4:5}getAsDataArray(){if(this.pos<this.data.byteLength)return this.data.subarray(0,this.pos);if(this.pos==this.data.byteLength)return this.data;throw new Error("ArrayBufferDataStream's pos lies beyond end of buffer")}};D.prototype.writeU8=D.prototype.writeByte;var it=null,rt=class{constructor(t){let i=[],a=Promise.resolve(),u=null,x=null;t&&t.constructor.name==="FileWriter"?u=t:it&&t&&(x=t),this.pos=0,this.length=0;function h(d){return new Promise(function(r,B){let w=new FileReader;w.addEventListener("loadend",function(){r(w.result)}),w.readAsArrayBuffer(d)})}function f(d){return new Promise(function(r,B){d instanceof Uint8Array?r(d):d instanceof ArrayBuffer||ArrayBuffer.isView(d)?r(new Uint8Array(d)):d instanceof Blob?r(h(d).then(function(w){return new Uint8Array(w)})):r(h(new Blob([d])).then(function(w){return new Uint8Array(w)}))})}function p(d){let r=d.byteLength||d.length||d.size;if(!Number.isInteger(r))throw new Error("Failed to determine size of element");return r}this.seek=function(d){if(d<0)throw new Error("Offset may not be negative");if(isNaN(d))throw new Error("Offset may not be NaN");if(d>this.length)throw new Error("Seeking beyond the end of file is not allowed");this.pos=d},this.write=function(d){let r={offset:this.pos,data:d,length:p(d)},B=r.offset>=this.length;this.pos+=r.length,this.length=Math.max(this.length,this.pos),a=a.then(function(){if(x)return new Promise(function(w,E){f(r.data).then(function(A){let g=0,C=Buffer.from(A.buffer),k=function(T,y,m){g+=y,g>=m.length?w():it.write(x,m,g,m.length-g,r.offset+g,k)};it.write(x,C,0,C.length,r.offset,k)})});if(u)return new Promise(function(w,E){u.onwriteend=w,u.seek(r.offset),u.write(new Blob([r.data]))});if(!B)for(let w=0;w<i.length;w++){let E=i[w];if(!(r.offset+r.length<=E.offset||r.offset>=E.offset+E.length)){if(r.offset<E.offset||r.offset+r.length>E.offset+E.length)throw new Error("Overwrite crosses blob boundaries");if(r.offset==E.offset&&r.length==E.length){E.data=r.data;return}else return f(E.data).then(function(A){return E.data=A,f(r.data)}).then(function(A){r.data=A,E.data.set(r.data,r.offset-E.offset)})}}i.push(r)})},this.complete=function(d){return x||u?a=a.then(function(){return null}):a=a.then(function(){let r=[];for(let B=0;B<i.length;B++)r.push(i[B].data);return new Blob(r,{type:d})}),a}}};function mt(e,t){let i={};return[e,t].forEach(function(a){for(let u in a)Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u])}),i}function pt(e){if(typeof e!="string"||!e.match(/^data:image\/webp;base64,/i))throw new Error("Failed to decode WebP Base64 URL");return window.atob(e.substring("data:image/webp;base64,".length))}function ot(e,t){let i=typeof e=="string"&&/^data:image\/webp/.test(e)?e:e.toDataURL("image/webp",t);return pt(i)}function wt(e){let t=e.charCodeAt(0),i=e.charCodeAt(1),a=e.charCodeAt(2),u=e.charCodeAt(3);return(t|i<<8|a<<16|u<<24)>>>0}function st(e){let t=e.indexOf("VP8",12);if(t===-1)throw new Error("Bad image format, does this browser support WebP?");let i=!1;for(;t<e.length-8;){let a,u;switch(u=e.substring(t,t+4),t+=4,a=wt(e.substring(t,t+4)),t+=4,u){case"VP8 ":return{frame:e.substring(t,t+a),hasAlpha:i};case"ALPH":i=!0;break}t+=a,(a&1)!==0&&t++}throw new Error("Failed to find VP8 keyframe in WebP image, is this image mistakenly encoded in the Lossless WebP format?")}function gt(e){this.value=e}function dt(e){this.value=e}function N(e,t,i){if(Array.isArray(i))for(let a=0;a<i.length;a++)N(e,t,i[a]);else if(typeof i=="string")e.writeString(i);else if(i instanceof Uint8Array)e.writeBytes(i);else if(i.id)if(i.offset=e.pos+t,e.writeUnsignedIntBE(i.id),Array.isArray(i.data)){let a,u,x;i.size===-1?e.writeByte(255):(a=e.pos,e.writeBytes([0,0,0,0])),u=e.pos,i.dataOffset=u+t,N(e,t,i.data),i.size!==-1&&(x=e.pos,i.size=x-u,e.seek(a),e.writeEBMLVarIntWidth(i.size,4),e.seek(x))}else if(typeof i.data=="string")e.writeEBMLVarInt(i.data.length),i.dataOffset=e.pos+t,e.writeString(i.data);else if(typeof i.data=="number")i.size||(i.size=e.measureUnsignedInt(i.data)),e.writeEBMLVarInt(i.size),i.dataOffset=e.pos+t,e.writeUnsignedIntBE(i.data,i.size);else if(i.data instanceof dt)e.writeEBMLVarInt(8),i.dataOffset=e.pos+t,e.writeDoubleBE(i.data.value);else if(i.data instanceof gt)e.writeEBMLVarInt(4),i.dataOffset=e.pos+t,e.writeFloatBE(i.data.value);else if(i.data instanceof Uint8Array)e.writeEBMLVarInt(i.data.byteLength),i.dataOffset=e.pos+t,e.writeBytes(i.data);else throw new Error("Bad EBML datatype "+typeof i.data);else throw new Error("Bad EBML datatype "+typeof i.data)}var J=class{constructor(t){let i=5e3,a=1,u=!1,x=0,h=0,f=null,p=null,d=null,r=[],B=0,w=0,E={quality:.95,transparent:!1,alphaQuality:void 0,fileWriter:null,fd:null,frameDuration:null,frameRate:null},A={Cues:{id:new Uint8Array([28,83,187,107]),positionEBML:null},SegmentInfo:{id:new Uint8Array([21,73,169,102]),positionEBML:null},Tracks:{id:new Uint8Array([22,84,174,107]),positionEBML:null}},g,C={id:17545,data:new dt(0)},k,T=[],y=new rt(t.fileWriter||t.fd);function m(n){return n-g.dataOffset}function U(n){(f===null||f.width!==n.width||f.height!==n.height)&&(f=document.createElement("canvas"),f.width=n.width,f.height=n.height,p=f.getContext("2d"),d=p.createImageData(f.width,f.height));let l=n.getContext("2d"),v=l.getImageData(0,0,n.width,n.height).data,c=d.data,L=0,P=n.width*n.height*4;for(let K=3;K<P;K+=4){let q=v[K];c[L++]=q,c[L++]=q,c[L++]=q,c[L++]=255}return p.putImageData(d,0,0),f}function _(){let n={id:21420,size:5,data:0},l={id:290298740,data:[]};for(let v in A){let c=A[v];c.positionEBML=Object.create(n),l.data.push({id:19899,data:[{id:21419,data:c.id},c.positionEBML]})}return l}function I(){k=_();let n={id:440786851,data:[{id:17030,data:1},{id:17143,data:1},{id:17138,data:4},{id:17139,data:8},{id:17026,data:"webm"},{id:17031,data:2},{id:17029,data:2}]},l={id:357149030,data:[{id:2807729,data:1e6},{id:19840,data:"webm-writer-js"},{id:22337,data:"webm-writer-js"},C]},v=[{id:176,data:x},{id:186,data:h}];t.transparent&&v.push({id:21440,data:1});let c={id:374648427,data:[{id:174,data:[{id:215,data:a},{id:29637,data:a},{id:156,data:0},{id:2274716,data:"und"},{id:134,data:"V_VP8"},{id:2459272,data:"VP8"},{id:131,data:1},{id:224,data:v}]}]};g={id:408125543,size:-1,data:[k,l,c]};let L=new D(256);N(L,y.pos,[n,g]),y.write(L.getAsDataArray()),A.SegmentInfo.positionEBML.data=m(l.offset),A.Tracks.positionEBML.data=m(c.offset),u=!0}function H(n){let l,v,c=new D(1+2+1);if(!(n.trackNumber>0&&n.trackNumber<127))throw new Error("TrackNumber must be > 0 and < 127");return c.writeEBMLVarInt(n.trackNumber),c.writeU16BE(n.timecode),c.writeByte(0),l={id:161,data:[c.getAsDataArray(),n.frame]},v={id:30113,data:[{id:166,data:[{id:238,data:1},{id:165,data:n.alpha}]}]},{id:160,data:[l,v]}}function W(n){let l=new D(1+2+1);if(!(n.trackNumber>0&&n.trackNumber<127))throw new Error("TrackNumber must be > 0 and < 127");return l.writeEBMLVarInt(n.trackNumber),l.writeU16BE(n.timecode),l.writeByte(1<<7),{id:163,data:[l.getAsDataArray(),n.frame]}}function O(n){return n.alpha?H(n):W(n)}function F(n){return{id:524531317,data:[{id:231,data:Math.round(n.timecode)}]}}function z(n,l,v){T.push({id:187,data:[{id:179,data:l},{id:183,data:[{id:247,data:n},{id:241,data:m(v)}]}]})}function $(){let n={id:475249515,data:T},l=new D(16+T.length*32);N(l,y.pos,n),y.write(l.getAsDataArray()),A.Cues.positionEBML.data=m(n.offset)}function G(){if(r.length===0)return;let n=0;for(let c=0;c<r.length;c++)n+=r[c].frame.length+(r[c].alpha?r[c].alpha.length:0);let l=new D(n+r.length*64),v=F({timecode:Math.round(B)});for(let c=0;c<r.length;c++)v.data.push(O(r[c]));N(l,y.pos,v),y.write(l.getAsDataArray()),z(a,Math.round(B),v.offset),r=[],B+=w,w=0}function tt(){if(!t.frameDuration)if(t.frameRate)t.frameDuration=1e3/t.frameRate;else throw new Error("Missing required frameDuration or frameRate setting");t.quality=Math.max(Math.min(t.quality,.99999),0),t.alphaQuality===void 0?t.alphaQuality=t.quality:t.alphaQuality=Math.max(Math.min(t.alphaQuality,.99999),0)}function et(n){n.trackNumber=a,n.timecode=Math.round(w),r.push(n),w+=n.duration,w>=i&&G()}function Q(){let n=new D(k.size),l=y.pos;N(n,k.dataOffset,k.data),y.seek(k.dataOffset),y.write(n.getAsDataArray()),y.seek(l)}function V(){let n=new D(8),l=y.pos;n.writeDoubleBE(B),y.seek(C.dataOffset),y.write(n.getAsDataArray()),y.seek(l)}this.addFrame=function(n,l,v){u||(x=n.width||0,h=n.height||0,I());let c=st(ot(n,t.quality)),L,P=null;v?L=v:typeof l=="number"?L=l:L=t.frameDuration,t.transparent&&(l instanceof HTMLCanvasElement||typeof l=="string"?P=l:c.hasAlpha&&(P=U(n))),et({frame:c.frame,duration:L,alpha:P?st(ot(P,t.alphaQuality)).frame:null})},this.complete=function(){return u||I(),G(),$(),Q(),V(),y.complete("video/webm")},this.getWrittenSize=function(){return y.length},t=mt(E,t||{}),tt()}};function lt(e){return String("0000000"+e).slice(-7)}var yt=window.Date.now();function bt(){function e(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function M(e){let t={};this.settings=e,this.on=function(i,a){t[i]=a},this.emit=function(i){let a=t[i];a&&a.apply(null,Array.prototype.slice.call(arguments,1))},this.filename=e.name||bt(),this.extension="",this.mimeType=""}M.prototype.start=function(){};M.prototype.stop=function(){};M.prototype.add=function(){};M.prototype.save=function(){};M.prototype.dispose=function(){};M.prototype.safeToProceed=function(){return!0};M.prototype.step=function(){console.log("Step not set!")};function j(e){M.call(this,e),this.quality=e.quality/100||.8,this.extension=".webm",this.mimeType="video/webm",this.baseFilename=this.filename,this.framerate=e.framerate,this.frames=0,this.part=1,this.videoWriter=new J({quality:this.quality,fileWriter:null,fd:null,frameRate:this.framerate})}j.prototype=Object.create(M.prototype);j.prototype.start=function(e){this.dispose()};j.prototype.add=function(e){this.videoWriter.addFrame(e),this.settings.autoSaveTime>0&&this.frames/this.settings.framerate>=this.settings.autoSaveTime?this.save(function(t){this.filename=this.baseFilename+"-part-"+lt(this.part),X(t,this.filename+this.extension,this.mimeType),this.dispose(),this.part++,this.filename=this.baseFilename+"-part-"+lt(this.part),this.step()}.bind(this)):(this.frames++,this.step())};j.prototype.save=function(e){this.videoWriter.complete().then(e)};j.prototype.dispose=function(e){this.frames=0,this.videoWriter=new J({quality:this.quality,fileWriter:null,fd:null,frameRate:this.framerate})};function Y(e){M.call(this,e),this.framerate=this.settings.framerate,this.type="video/webm",this.extension=".webm",this.stream=null,this.mediaRecorder=null,this.chunks=[]}Y.prototype=Object.create(M.prototype);Y.prototype.add=function(e){this.stream||(this.stream=e.captureStream(this.framerate),this.mediaRecorder=new MediaRecorder(this.stream),this.mediaRecorder.start(),this.mediaRecorder.ondataavailable=function(t){this.chunks.push(t.data)}.bind(this)),this.step()};Y.prototype.save=function(e){this.mediaRecorder.onstop=function(t){let i=new Blob(this.chunks,{type:"video/webm"});this.chunks=[],e(i)}.bind(this),this.mediaRecorder.stop()};function at(e){M.call(this,e),e.quality=31-(e.quality*30/100||10),e.workers=e.workers||4,this.extension=".gif",this.mimeType="image/gif",this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.sizeSet=!1,this.encoder=new GIF({workers:e.workers,quality:e.quality,workerScript:e.workersPath+"gif.worker.js"}),this.encoder.on("progress",function(t){this.settings.onProgress&&this.settings.onProgress(t)}.bind(this)),this.encoder.on("finished",function(t){let i=this.callback;i&&(this.callback=void 0,i(t))}.bind(this))}at.prototype=Object.create(M.prototype);at.prototype.add=function(e){this.sizeSet||(this.encoder.setOption("width",e.width),this.encoder.setOption("height",e.height),this.sizeSet=!0),this.canvas.width=e.width,this.canvas.height=e.height,this.ctx.drawImage(e,0,0),this.encoder.addFrame(this.ctx,{copy:!0,delay:this.settings.step}),this.step()};at.prototype.save=function(e){this.callback=e,this.encoder.render()};function ft(e){let t=e||{},i,a,u,x,h,f,p=[],d=[],r=0,B=0,w=[],E=!1,A={};t.framerate=t.framerate||60,t.motionBlurFrames=2*(t.motionBlurFrames||1),i=t.verbose||!1,t.step=1e3/t.framerate,t.timeLimit=t.timeLimit||0,t.frameLimit=t.frameLimit||0,t.startTime=t.startTime||0;let g=document.createElement("div");g.style.position="absolute",g.style.left=g.style.top=0,g.style.backgroundColor="black",g.style.fontFamily="monospace",g.style.fontSize="11px",g.style.padding="5px",g.style.color="red",g.style.zIndex=1e5,t.display&&document.body.appendChild(g);let C=document.createElement("canvas"),k=C.getContext("2d"),T,y;S("Step is set to "+t.step+"ms");let m={webm:j,"webm-mediarecorder":Y},U=m[t.format];if(!U)throw"Error: Incorrect or missing format: Valid formats are "+Object.keys(m).join(", ");if("performance"in window||(window.performance={}),Date.now=Date.now||function(){return new Date().getTime()},!("now"in window.performance)){let s=Date.now();performance.timing&&performance.timing.navigationStart&&(s=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-s}}let _=window.setTimeout,I=window.setInterval,H=window.clearInterval,W=window.clearTimeout,O=window.requestAnimationFrame,F=window.Date.now,z=window.performance.now,$=window.Date.prototype.getTime,G=[];function tt(){S("Capturer start"),u=window.Date.now(),a=u+t.startTime,h=window.performance.now(),x=h+t.startTime,window.Date.prototype.getTime=function(){return a},window.Date.now=function(){return a},window.setTimeout=function(o,b){let R={callback:o,time:b,triggerTime:a+b};return p.push(R),S("Timeout set to "+R.time),R},window.clearTimeout=function(o){for(let b=0;b<p.length;b++)if(p[b]==o){p.splice(b,1),S("Timeout cleared");continue}},window.setInterval=function(o,b){let R={callback:o,time:b,triggerTime:a+b};return d.push(R),S("Interval set to "+R.time),R},window.clearInterval=function(o){return S("clear Interval"),null},window.requestAnimationFrame=function(o){w.push(o)},window.performance.now=function(){return x};function s(){return this._hooked||(this._hooked=!0,this._hookedTime=this.currentTime||0,this.pause(),G.push(this)),this._hookedTime+t.startTime}try{Object.defineProperty(HTMLVideoElement.prototype,"currentTime",{get:s}),Object.defineProperty(HTMLAudioElement.prototype,"currentTime",{get:s})}catch(o){S(o)}}function et(){tt(),f.start(),E=!0}function Q(){E=!1,f.stop(),l()}function V(s,o){_(s,0,o)}function n(){V(q)}f=new U(t),f.step=n,f.on("process",q),f.on("progress",ht);function l(){S("Capturer stop"),window.setTimeout=_,window.setInterval=I,window.clearInterval=H,window.clearTimeout=W,window.requestAnimationFrame=O,window.Date.prototype.getTime=$,window.Date.now=F,window.performance.now=z}function v(){let s=r/t.framerate;(t.frameLimit&&r>=t.frameLimit||t.timeLimit&&s>=t.timeLimit)&&(Q(),nt());let o=new Date(null);o.setSeconds(s),t.motionBlurFrames>2?g.textContent="CCapture "+t.format+" | "+r+" frames ("+B+" inter) | "+o.toISOString().substr(11,8):g.textContent="CCapture "+t.format+" | "+r+" frames | "+o.toISOString().substr(11,8)}function c(s){(C.width!==s.width||C.height!==s.height)&&(C.width=s.width,C.height=s.height,T=new Uint16Array(C.height*C.width*4),k.fillStyle="#0",k.fillRect(0,0,C.width,C.height))}function L(s){k.drawImage(s,0,0),y=k.getImageData(0,0,C.width,C.height);for(let o=0;o<T.length;o+=4)T[o]+=y.data[o],T[o+1]+=y.data[o+1],T[o+2]+=y.data[o+2];B++}function P(){let s=y.data;for(let o=0;o<T.length;o+=4)s[o]=T[o]*2/t.motionBlurFrames,s[o+1]=T[o+1]*2/t.motionBlurFrames,s[o+2]=T[o+2]*2/t.motionBlurFrames;k.putImageData(y,0,0),f.add(C),r++,B=0,S("Full MB Frame! "+r+" "+a);for(let o=0;o<T.length;o+=4)T[o]=0,T[o+1]=0,T[o+2]=0;gc()}function K(s){E&&(t.motionBlurFrames>2?(c(s),L(s),B>=.5*t.motionBlurFrames?P():n()):(f.add(s),r++,S("Full Frame! "+r)))}function q(){let s=1e3/t.framerate,o=(r+B/t.motionBlurFrames)*s;a=u+o,x=h+o,G.forEach(function(b){b._hookedTime=o/1e3}),v(),S("Frame: "+r+" "+B);for(let b=0;b<p.length;b++)if(a>=p[b].triggerTime){V(p[b].callback),p.splice(b,1);continue}for(let b=0;b<d.length;b++)if(a>=d[b].triggerTime){V(d[b].callback),d[b].triggerTime+=d[b].time;continue}w.forEach(function(b){V(b,a-yt)}),w=[]}function nt(s){s||(s=function(o){return X(o,f.filename+f.extension,f.mimeType),!1}),f.save(s)}function S(s){i&&console.log(s)}function ut(s,o){A[s]=o}function ct(s){let o=A[s];o&&o.apply(null,Array.prototype.slice.call(arguments,1))}function ht(s){ct("progress",s)}return{start:et,capture:K,stop:Q,save:nt,on:ut}}var Z=class{constructor(){this.active=!1,this.running=!1}enableCapture(t){this.active=!0,this.el=t.element||document.querySelector("canvas"),this.maxFrames=t.frameCount||600,this.capture=ft({framerate:t.frameRate||60,format:"webm",verbose:!1,display:!!t.display}),this.onComplete=t.onComplete||function(){}}captureFrame(){this.active&&!this.running&&(this.capture.start(),this.frames=0,this.running=!0),this.active&&(this.capture.capture(this.el),this.frames++,this.frames>=this.maxFrames&&(this.capture.stop(),this.capture.save(),this.onComplete(),this.active=!1))}};if(window){let e=new Z;window.p5&&(window.p5.enableCapture=e.enableCapture.bind(e),window.p5.captureFrame=e.captureFrame.bind(e)),window.enableCapture=e.enableCapture.bind(e),window.captureFrame=e.captureFrame.bind(e)}})();
//# sourceMappingURL=p5.webm-capture.js.map
